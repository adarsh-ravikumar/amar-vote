/// <reference  path="../../pb_data/types.d.ts" />
onBootstrap(function (e) {
    e.next();
    console.log('Hello World!');
});
onRecordAfterUpdateSuccess(function (e) {
    e.next();
    var APP_URL = 'https://amar-vote.pockethost.io';
    var icon = e.record;
    if (!e.record)
        return;
    var candidateID = e.record.get('assigned_to');
    try {
        if (candidateID.length == 0)
            return;
        var candidateInfo = $app.findRecordById('candidates', candidateID);
        var post = $app.findRecordById('posts', candidateInfo.get('post'));
        var informationVerify = new MailerMessage({
            from: {
                address: $app.settings().meta.senderAddress,
                name: $app.settings().meta.senderName
            },
            to: [{ address: candidateInfo.get('email') }],
            subject: "Welcome ".concat(candidateInfo.get('name'), "! Your Candidacy Has Been Registered!"),
            html: /*html*/ "\n\t\t\t<h3>Dear ".concat(candidateInfo.get('name'), ",</h3>\n\t\t\t<p>We are pleased to inform you that your candidacy has been successfully registered in our system. Below are your details:</p>\n\n\t\t\t<p><strong>Candidate Name:</strong> ").concat(candidateInfo.get('name'), "</p>\n\t\t\t<p><strong>Class:</strong> ").concat(candidateInfo.get('class'), " - ").concat(candidateInfo.get('section'), "</p>\n\t\t\t<p><strong>Position:</strong> ").concat(post.get('title'), "</p>\n\n\t\t\t<p><strong>Candidate Image</strong><p>\n\t\t\t<img src=\"").concat(APP_URL, "/api/files/").concat(candidateInfo.collection().id, "/").concat(candidateID, "/").concat(candidateInfo.get('image'), "\" alt=\"candidate-image\" />\n\n\t\t\t<p><strong>Campaign Icon</strong><p>\n\t\t\t<img src=\"").concat(APP_URL, "/api/files/").concat(icon.collection().id, "/").concat(icon.id, "/").concat(icon.get('icon'), "\" alt=\"icon-image\" />\n\n\t\t\t<p>Please review your details and ensure that everything is correct. You can download your campaign icon on desktop by right clicking on it and selection \"Save Image As\". If you have any questions or require modifications, feel free to reach out to a member of the Student Elections Department</p>\n\t\t\t\n\t\t\t<p>We wish you the best of luck in the upcoming election!</p>\n\n\t\t\t<p><strong>Best regards,</strong></p>\n\t\t\t<p><strong>Student Elections Department, Chinmaya Vidyalaya CBSE</strong></p>\n\n\t\t\t<hr />\n\n\t\t\t<p style=\"color: rgb(40,40,40); text-align: center;\">This email was automatically generated by AMAR Vote</p>\n\t\t\t<p style=\"color: rgb(40,40,40); text-align: center;\">Made with \u2764\uFE0F by <strong>Adarsh Ravikumar</strong> - Batch of 2025</p>\n\t\t\t")
        });
        var guidelines = new MailerMessage({
            from: {
                address: $app.settings().meta.senderAddress,
                name: $app.settings().meta.senderName
            },
            to: [{ address: candidateInfo.get('email') }],
            subject: "\uD83D\uDCE2 Campaign Guidelines for Candidates",
            html: /*html*/ "\n\t\t\t<h3>Dear ".concat(candidateInfo.get('name'), ",</h3>\n\t\t\t<p>Congratulations on running for office in our school elections! To ensure a fair, respectful, and enjoyable campaign, please follow these guidelines:</p>\n\n\t\t\t<h4>\u2705 DOs: Run a Positive and Fair Campaign</h4>\n\t\t\t<ul style=\"list-decoration: none\">\n\t\t\t\t<li> <strong>\u2714 Be Friendly & Respectful</strong> \u2013 Treat fellow candidates, voters, and school staff with kindness. </li>\n\t\t\t\t<li> <strong>\u2714 Stay Honest</strong> \u2013 Share your ideas truthfully. Avoid false promises or misleading statements. </li>\n\t\t\t\t<li> <strong>\u2714 Promote Your Strengths</strong> \u2013 Focus on what <strong>you</strong> can do for the school rather than criticizing others. </li>\n\t\t\t\t<li> <strong>\u2714 Encourage Participation </strong> \u2013 Inspire classmates to get involved and vote, regardless of who they support. </li>\n\t\t\t\t<li> <strong>\u2714 Follow School Rules</strong> \u2013 Stick to the guidelines for posters, speeches, and social media usage. </li>\n\t\t\t\t<li> <strong>\u2714 Be Inclusive</strong> \u2013 Represent all students and listen to their ideas with an open mind. </li>\n\t\t\t</ul>\n\n\t\t\t<hr style=\"opacity: 0.3\"/>\n\t\t\t\n\t\t\t<h4>\u274C DON'Ts: Avoid Negative or Unfair Tactics</h4>\n\t\t\t<ul style=\"list-decoration: none\">\n\t\t\t\t<li><strong>\u274C No Toxic Behavior</strong> \u2013 Avoid personal attacks, insults, or spreading rumors about other candidates.</li>\n\t\t\t\t<li><strong>\u274C No Bribing or Pressuring Voters</strong> \u2013 Let students decide freely without offering rewards or forcing them.</li>\n\t\t\t\t<li><strong>\u274C No Vandalism</strong> \u2013 Do not damage or remove another candidate\u2019s posters or materials.</li>\n\t\t\t\t<li><strong>\u274C No Spam Campaigning</strong> \u2013 Avoid excessive messaging, classroom interruptions, or pressuring students online.</li>\n\t\t\t\t<li><strong>\u274C No Disrupting School Activities</strong> \u2013 Campaigning should not interfere with learning or school events.</li>\n\t\t\t</ul>\n\t\t\t\n\t\t\t<hr style=\"opacity: 0.3\"/>\n\n\t\t\t<h4>\u2696 Fair Play & Good Sportsmanship</h4>\n\t\t\t<ul>\n\t\t\t\t<li><strong>Win or Lose Gracefully</strong> \u2013 If you win, be humble. If you lose, support the winner and stay involved in school leadership.</li>\n\t\t\t\t<li><strong>Respect Election Results</strong> \u2013 The election process is free and fair; let\u2019s keep it that way.</li>\n\t\t\t</ul>\n\n\t\t\t<p>This election is about leadership, responsibility, and teamwork. Make it a great experience for yourself and your school.</p>\n\t\t\t<p>We wish you the best of luck in the upcoming election!</p>\n\n\t\t\t<p><strong>Best regards,</strong></p>\n\t\t\t<p><strong>Student Elections Department, Chinmaya Vidyalaya CBSE</strong></p>\n\n\t\t\t<hr />\n\n\t\t\t<p style=\"color: rgb(40,40,40); text-align: center;\">This email was automatically generated by AMAR Vote</p>\n\t\t\t<p style=\"color: rgb(40,40,40); text-align: center;\">Made with \u2764\uFE0F by <strong>Adarsh Ravikumar</strong> - Batch of 2025</p>\n\t\t\t")
        });
        console.log("Email sent to ".concat(candidateInfo.get('email')));
        $app.newMailClient().send(informationVerify);
        $app.newMailClient().send(guidelines);
    }
    catch (e) {
        console.log('something went terribly wrong');
        console.log(e);
    }
}, 'icons');
